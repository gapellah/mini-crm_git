{% extends "base.html" %}
{% block title %}契約{% endblock %}
{% block content %}
  <h1 class="title">契約一覧</h1>
  {% include "core/lease_form.html" %}
  <table class="table is-fullwidth is-striped">
    <thead>
      <tr>
        <th>物件</th>
        <th>入居者</th>
        <th>賃料</th>
        <th>状態</th>
        <th>開始日</th>
        <th>終了日</th>
        <th>操作</th>
      </tr>
    </thead>
    <tbody>
      {% for lease in leases %}
        <tr>
          <td>{{ lease.property.name }}</td>
          <td>{{ lease.tenant.name }}</td>
          <td>{{ "{:,.2f}".format(lease.rent) }}</td>
          <td>{{ "契約中" if lease.status == "active" else "終了" }}</td>
          <td>{{ lease.start_date }}</td>
          <td>{{ lease.end_date or "-" }}</td>
          <td>
            <form method="post" action="{{ url_for('core.delete_lease', lease_id=lease.id) }}">
              {{ delete_forms[lease.id].hidden_tag() }}
              {{ delete_forms[lease.id].id(value=lease.id) }}
              {{ delete_forms[lease.id].submit(class="button is-danger is-light is-small") }}
            </form>
          </td>
        </tr>
      {% else %}
        <tr>
          <td colspan="7">契約がまだ登録されていません。</td>
        </tr>
      {% endfor %}
    </tbody>
  </table>
{% endblock %}
