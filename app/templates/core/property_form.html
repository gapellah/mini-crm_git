<!-- 物件の新規作成・編集フォーム -->
<div class="box">
  <!-- 編集中は対象物件を表示し、フォームのコンテキストを利用者に伝える -->
  <h2 class="subtitle">{{ '物件を編集' if editing_property else '物件を追加' }}</h2>
  {% if editing_property %}
    <div class="notification is-warning is-light">
      編集モード: {{ editing_property.name }}（{{ editing_property.address }}）
      <a class="button is-small is-light" href="{{ url_for('core.properties') }}">編集をやめる</a>
    </div>
  {% endif %}
  <form method="post">
    {{ form.hidden_tag() }}
    <!-- hidden property_id で新規/更新を判定。バリデーション失敗時の状態維持にも使う -->
    {{ form.property_id() }}
    <div class="field">
      <label class="label">{{ form.name.label }}</label>
      <div class="control">
        {{ form.name(class="input") }}
      </div>
      {% for error in form.name.errors %}
        <p class="help is-danger">{{ error }}</p>
      {% endfor %}
    </div>
    <div class="field">
      <label class="label">{{ form.address.label }}</label>
      <div class="control">
        {{ form.address(class="input") }}
      </div>
      {% for error in form.address.errors %}
        <p class="help is-danger">{{ error }}</p>
      {% endfor %}
    </div>
    <div class="field">
      <label class="label">{{ form.note.label }}</label>
      <div class="control">
        {{ form.note(class="textarea") }}
      </div>
      {% for error in form.note.errors %}
        <p class="help is-danger">{{ error }}</p>
      {% endfor %}
    </div>
    <div class="field">
      <div class="control">
        {{ form.submit(class="button is-primary") }}
      </div>
    </div>
  </form>
</div>
